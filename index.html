<<<<<<< HEAD
import React, { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Plus, Sparkles } from "lucide-react";

const clothingTypes = [
  "tshirt", "camisola", "casaco", "calcas", "sapatos", "chapeu", "acessorio"
];

export default function OutfitGenerator() {
  const [clothes, setClothes] = useState(() => {
    const saved = localStorage.getItem("clothes");
    return saved ? JSON.parse(saved) : [];
  });
  const [newItem, setNewItem] = useState({ name: "", image: "", link: "", type: "", styles: [], season: "" });
  const [outfit, setOutfit] = useState([]);
  const [season, setSeason] = useState("verao");
=======
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de Outfit</title>
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/2/28/Logo_Pull_%26_Bear_2020.svg" type="image/png">
  
  <!-- Incluindo a fonte Montserrat Bold do Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  
  <!-- Incluindo a biblioteca xlsx -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script>
  
  <style>
  body {
    font-family: 'Montserrat', sans-serif;
    background-color: #F7F7F7;
    color: #333;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .container {
    background-color: #FFF;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 20px;
    width: 80%;
    max-width: 1200px;
    border-radius: 10px;
  }

  h1 {
    text-align: center;
    font-size: 2rem;
    color: #4e3621; /* Castanho escuro */
    margin-bottom: 20px;
    font-weight: 700;
  }

  input, select {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    box-sizing: border-box;
    font-weight: 700; /* Montserrat Bold nos inputs */
  }

  button {
    background-color: #4e3621; /* Castanho escuro */
    color: white;
    border: none;
    padding: 15px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    font-weight: 700; /* Montserrat Bold nos botões */
  }

  button:hover {
    background-color: #3c2a19;
  }

  .item-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #F1F1F1;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .item-card img {
    max-width: 100%;
    border-radius: 8px;
  }

  .item-card p {
    margin-top: 10px;
    font-size: 0.9rem;
    text-align: center;
  }

  .item-card a {
    color: #4e3621;
    text-decoration: none;
    font-size: 0.8rem;
  }

  .outfit-section {
    margin-top: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
  }

  .checkboxes {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .checkboxes label {
    font-weight: 700;
    display: flex;
    align-items: center;
  }

  .question-section {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-top: 20px;
  }

  /* Responsividade para dispositivos móveis */
  @media (max-width: 768px) {
    h1 {
      font-size: 1.5rem; /* Ajuste do tamanho do título */
    }

    .container {
      width: 95%; /* Deixa o container mais estreito em telas pequenas */
      padding: 10px; /* Menos padding para otimizar o espaço */
    }

    input, select, button {
      font-size: 14px; /* Fontes menores em dispositivos móveis */
      padding: 12px; /* Ajuste do padding para inputs e botões */
    }

    .item-card {
      padding: 10px; /* Menos padding nos cards */
    }

    .outfit-section {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); /* Colunas menores em dispositivos móveis */
      gap: 10px; /* Menos espaço entre as colunas */
    }

    /* Ajuste dos checkboxes */
    .checkboxes label {
      font-size: 14px; /* Fontes menores para os checkboxes */
    }

    .question-section {
      flex-direction: column; /* Deixa a seção de perguntas em coluna */
      align-items: stretch;
    }
  }

  /* Responsividade para dispositivos muito pequenos */
  @media (max-width: 480px) {
    .container {
      padding: 5px; /* Ainda menos padding para telas pequenas */
    }

    button {
      padding: 12px; /* Botões mais compactos em dispositivos pequenos */
    }

    input, select {
      font-size: 13px; /* Redução do tamanho da fonte */
    }

    h1 {
      font-size: 1.25rem; /* Tamanho menor do título */
    }

    .item-card {
      padding: 8px; /* Card mais compacto */
    }

    .outfit-section {
      grid-template-columns: 1fr; /* Apenas uma coluna em dispositivos muito pequenos */
    }
  }
</style>

</head>
<body>
  <div class="container">
    <h1>Gerador de Outfit</h1>

    <div>
      <input type="text" id="linkInput" placeholder="Cole o link do produto" />
      <button onclick="autofillFromLink()">Preencher dados do link</button>
    </div>
>>>>>>> 4fc9112ea75694ad04a5f436be73d6cb0f79565a

  useEffect(() => {
    localStorage.setItem("clothes", JSON.stringify(clothes));
  }, [clothes]);

  const handleStyleCheckbox = (style) => {
    setNewItem((prev) => {
      const styles = prev.styles.includes(style)
        ? prev.styles.filter((s) => s !== style)
        : [...prev.styles, style];
      return { ...prev, styles };
    });
  };

  const addClothingItem = () => {
    if (newItem.name.trim() && newItem.type && newItem.styles.length > 0 && newItem.season) {
      setClothes([...clothes, newItem]);
      setNewItem({ name: "", image: "", link: "", type: "", styles: [], season: "" });
    }
  };

  const removeClothingItem = (index) => {
    const updatedClothes = [...clothes];
    updatedClothes.splice(index, 1);
    setClothes(updatedClothes);
  };

  const generateOutfit = () => {
    const filtered = clothes.filter(item => item.season === season);
    const grouped = filtered.reduce((acc, item) => {
      if (!acc[item.type]) acc[item.type] = [];
      acc[item.type].push(item);
      return acc;
    }, {});

    const stylesCount = {};
    filtered.forEach(item => {
      item.styles.forEach(style => {
        stylesCount[style] = (stylesCount[style] || 0) + 1;
      });
    });
    const favoriteStyle = Object.entries(stylesCount).sort((a, b) => b[1] - a[1])[0]?.[0];

    const required = ["tshirt", "camisola", "calcas", "sapatos"];
    const optional = ["casaco", "chapeu", "acessorio"];

    const selected = [
      ...required.map(type => grouped[type]?.find(item => item.styles.includes(favoriteStyle)) || grouped[type]?.[0]),
      ...optional.map(type => grouped[type]?.find(item => item.styles.includes(favoriteStyle)))
    ].filter(Boolean);

    setOutfit(selected);
  };

  return (
    <div className="p-6 max-w-4xl mx-auto">
      <h1 className="text-3xl font-bold mb-4 text-center">Gerador de Outfit</h1>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-2 mb-2">
        <Input
          placeholder="Nome da peça"
          value={newItem.name}
          onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}
        />
        <Input
          placeholder="URL da imagem"
          value={newItem.image}
          onChange={(e) => setNewItem({ ...newItem, image: e.target.value })}
        />
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <select
          value={newItem.type}
          onChange={(e) => setNewItem({ ...newItem, type: e.target.value })}
          className="border rounded p-2 text-sm"
        >
          <option value="">Tipo da peça</option>
          {clothingTypes.map(type => (
            <option key={type} value={type}>{type}</option>
          ))}
        </select>

        <select
          value={newItem.season}
          onChange={(e) => setNewItem({ ...newItem, season: e.target.value })}
          className="border rounded p-2 text-sm"
        >
          <option value="">Estação</option>
          <option value="verao">Verão</option>
          <option value="inverno">Inverno</option>
        </select>

        <div className="flex flex-wrap gap-2 col-span-2">
          {['casual', 'street', 'formal', 'minimal'].map((style) => (
            <label key={style} className="flex items-center space-x-2 text-sm">
              <input
                type="checkbox"
                checked={newItem.styles.includes(style)}
                onChange={() => handleStyleCheckbox(style)}
              />
              <span className="capitalize">{style}</span>
            </label>
          ))}
        </div>
      </div>

      <Button onClick={addClothingItem} className="mb-6 w-full">
        <Plus className="w-4 h-4 mr-2" /> Adicionar
      </Button>

      <div className="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
        {clothes.map((item, index) => (
          <Card key={index} className="overflow-hidden">
            <img src={item.image} alt={item.name} className="w-full h-40 object-cover" />
            <CardContent className="p-2 text-sm">
              <p className="font-medium">{item.name}</p>
              <p className="text-xs text-gray-500">{item.type} • {item.styles.join(", ")} • {item.season}</p>
              <a href={item.link} target="_blank" className="text-blue-500 underline text-xs">
                Ver na loja
              </a>
              <Button 
                onClick={() => removeClothingItem(index)} 
                className="mt-2 w-full bg-red-500 hover:bg-red-700 text-white"
              >
                Remover
              </Button>
            </CardContent>
          </Card>
        ))}
      </div>

      <div className="flex justify-between gap-4 mb-4">
        <select
          value={season}
          onChange={(e) => setSeason(e.target.value)}
          className="border rounded p-2 text-sm w-full"
        >
          <option value="verao">Verão</option>
          <option value="inverno">Inverno</option>
        </select>

        <Button onClick={generateOutfit} className="w-full">
          <Sparkles className="w-4 h-4 mr-2" /> Criar Outfit
        </Button>
      </div>

      {outfit.length > 0 && (
        <div className="bg-gray-100 p-4 rounded-xl shadow">
          <h2 className="text-xl font-semibold mb-2">Outfit Sugerido:</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {outfit.map((item, index) => (
              <Card key={index} className="overflow-hidden">
                <img src={item.image} alt={item.name} className="w-full h-40 object-cover" />
                <CardContent className="p-2 text-sm">
                  <p className="font-medium">{item.name}</p>
                  <p className="text-xs text-gray-500">{item.type} • {item.styles.join(", ")} • {item.season}</p>
                  <a href={item.link} target="_blank" className="text-blue-500 underline text-xs">
                    Ver na loja
                  </a>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      )}
    </div>
<<<<<<< HEAD
  );
}
=======

    <h2>Minhas peças</h2>
    <div class="outfit-section" id="clothesList"></div>

    <!-- Botão Exportar para Excel Moved Above -->
    <button onclick="exportToExcel()">Exportar para Excel</button>
    
    <div class="question-section">
      <select id="outfitSeasonInput">
        <option value="verao">Verão</option>
        <option value="inverno">Inverno</option>
      </select>
      <select id="outfitStyleInput">
        <option value="streetwear">Streetwear</option>
        <option value="formal">Formal</option>
        <option value="casual">Casual</option>
        <option value="surpresa">Surpresa</option> <!-- Estilo surpresa ao sugerir outfit -->
      </select>
    </div>

    <div>
      <button onclick="generateOutfit()">Sugerir Outfit</button>
    </div>

    <h2>Outfit Sugerido</h2>
    <div class="outfit-section" id="outfitList"></div>
  </div>

  <script>
    const clothes = JSON.parse(localStorage.getItem("clothes")) || [];

    const autofillFromLink = async () => {
      const url = document.getElementById("linkInput").value;
      try {
        const res = await fetch(`/api/scrape?url=${encodeURIComponent(url)}`);
        const data = await res.json();
        document.getElementById("nameInput").value = data.name || '';
        document.getElementById("imageInput").value = data.image || '';
      } catch (error) {
        console.error("Erro ao preencher dados do link:", error);
      }
    };

    const addClothingItem = () => {
      const name = document.getElementById("nameInput").value;
      const image = document.getElementById("imageInput").value;
      const type = document.getElementById("typeInput").value;
      const season = document.getElementById("seasonInput").value;
      const styles = [];
      if (document.getElementById("styleStreet").checked) styles.push('streetwear');
      if (document.getElementById("styleFormal").checked) styles.push('formal');
      if (document.getElementById("styleCasual").checked) styles.push('casual');

      if (name && image && type && season && styles.length > 0) {
        const newItem = { name, image, type, season, styles };
        clothes.push(newItem);
        localStorage.setItem("clothes", JSON.stringify(clothes));
        renderClothes();
      }
    };

    const renderClothes = () => {
      const clothesList = document.getElementById("clothesList");
      clothesList.innerHTML = '';
      
      clothes.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'item-card';
        card.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <p>${item.name}</p>
          <a href="${item.link}" target="_blank">Ver na loja</a>
        `;
        clothesList.appendChild(card);
      });
    };

    const generateOutfit = () => {
      const outfitSeason = document.getElementById("outfitSeasonInput").value;
      const outfitStyle = document.getElementById("outfitStyleInput").value;

      let selectedItems = clothes.filter(item =>
        (item.season === outfitSeason || item.season === 'uniestacao') &&
        (item.styles.includes(outfitStyle) || outfitStyle !== 'surpresa')
      );

      // Se "surpresa" for selecionado, escolher um estilo aleatório
      if (outfitStyle === 'surpresa') {
        const stylesArray = ['streetwear', 'formal', 'casual'];
        const randomStyle = stylesArray[Math.floor(Math.random() * stylesArray.length)];
        selectedItems = clothes.filter(item =>
          (item.season === outfitSeason || item.season === 'uniestacao') &&
          item.styles.includes(randomStyle)
        );
      }

      const outfitList = document.getElementById("outfitList");
      outfitList.innerHTML = '';

      selectedItems.forEach(item => {
        const card = document.createElement('div');
        card.className = 'item-card';
        card.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <p>${item.name}</p>
          <a href="${item.link}" target="_blank">Ver na loja</a>
        `;
        outfitList.appendChild(card);
      });
    };

    const exportToExcel = () => {
      const ws = XLSX.utils.json_to_sheet(clothes);
      const wb = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(wb, ws, 'Peças');
      XLSX.writeFile(wb, 'outfit_gerador.xlsx');
    };

    // Renderizar as peças ao carregar
    renderClothes();
  </script>
</body>
</html>
>>>>>>> 4fc9112ea75694ad04a5f436be73d6cb0f79565a
